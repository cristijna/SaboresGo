{% extends 'core/base.html' %}
{% load static %}

{% block content %}

<link rel="stylesheet" href="{% static 'core/css/miperfil.css' %}">

<section class="perfil-section">

  <h1 class="perfil-title">Mi Perfil</h1>
  {% if messages %}
  <div class="alert-container">
      {% for message in messages %}
          <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
              {{ message }}
          </div>
      {% endfor %}
  </div>
  {% endif %}

  {% if mensaje_exito %}
  <div class="alert alert-success" style="margin-top:15px;">
    {{ mensaje_exito }}
  </div>
  {% endif %}

  {% if mensaje_error %}
  <div class="alert alert-danger" style="margin-top:15px;">
    {{ mensaje_error }}
  </div>
  {% endif %}

  <div class="perfil-layout">

    <div class="perfil-card">

      <h2 class="perfil-subtitle">Datos del cliente</h2>

      <div class="perfil-group">
        <label>Usuario</label>
        <input type="text" value="{{ request.user.username }}" disabled>
      </div>

      <form method="POST" action="{% url 'core:miperfil' %}">
        {% csrf_token %}

        <div class="perfil-group">
          <label>Dirección</label>
          <input
            type="text"
            name="direccion"
            value="{{ cliente.direccion }}"
            required
          >
        </div>

        <hr>

        <h2 class="perfil-subtitle">Convenio</h2>

        <div class="perfil-group">
          <label>Código de convenio</label>
          <input type="text" name="codigo_convenio" placeholder="Ingresa el código">
        </div>

        <div class="perfil-group">
          <label>Estado del convenio</label>
          <input
            type="text"
            value="{% if cliente.empresa %}Activo{% else %}No activo{% endif %}"
            disabled
          >
        </div>

        <div class="perfil-group">
          <label>Empresa asociada</label>
          <input
            type="text"
            value="{% if cliente.empresa %}{{ cliente.empresa.nombre }}{% else %}Ninguna{% endif %}"
            disabled
          >
        </div>

        <div class="perfil-group">
          <label>Saldo disponible</label>
          <input
            type="text"
            value="{% if cliente.empresa %}${{ cliente.saldo }}{% else %}---{% endif %}"
            disabled
          >
        </div>

        <div class="perfil-actions">
          <button type="submit" class="btn btn-primary">Guardar cambios</button>
        </div>

      </form>

    </div>

  </div>

</section>

{% endblock %}
