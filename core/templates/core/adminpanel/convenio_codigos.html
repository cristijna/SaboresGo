{% extends "core/adminpanel/panel.html" %}
{% block title %}Códigos de Convenio{% endblock %}
{% block extra_css %}
<style>

    /* ===== TÍTULO ===== */
    h1 {
        font-size: 1.7rem;
        font-weight: 600;
        color: #1f2937;
        margin-bottom: 20px;
    }

    /* ===== TABLA ===== */
    .admin-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
        background: white;
        border-radius: 12px;
        overflow: hidden;
        font-size: 0.95rem;
    }

    .admin-table th {
        background: #f3f4f6;
        font-weight: 700;
        padding: 12px;
        color: #374151;
        border-bottom: 2px solid #e5e7eb;
        text-align: left;
    }

    .admin-table td {
        padding: 12px;
        border-bottom: 1px solid #e5e7eb;
        color: #374151;
    }

    .admin-table tr:hover {
        background: #fafafa;
    }

    /* ===== BOTÓN NUEVO CÓDIGO ===== */
    .btn.btn-primary {
        background: #f97316;
        border: none;
        padding: 10px 18px;
        border-radius: 10px;
        font-size: 0.95rem;
        color: white;
        cursor: pointer;
        transition: 0.2s;
        text-decoration: none;
        display: inline-block;
    }

    .btn.btn-primary:hover {
        background: #ea580c;
    }

    /* ===== BADGES DE ESTADO ===== */
    .badge {
        padding: 6px 12px;
        border-radius: 8px;
        font-size: 0.8rem;
        font-weight: 600;
        display: inline-block;
    }

    .badge-green {
        background: #dcfce7;
        color: #166534;
        border: 1px solid #86efac;
    }

    .badge-gray {
        background: #e5e7eb;
        color: #4b5563;
        border: 1px solid #d1d5db;
    }

    /* ===== VOLVER ===== */
    .back-link {
        display: inline-block;
        margin-top: 20px;
        font-size: 0.9rem;
        color: #2563eb;
        text-decoration: none;
        transition: 0.2s;
    }

    .back-link:hover {
        text-decoration: underline;
        color: #1e40af;
    }

</style>
{% endblock %}

{% block admin_content %}
<h1>Códigos de convenio – {{ empresa.nombre }}</h1>

<div style="margin: 15px 0;">
    <a href="{% url 'adminpanel:codigos_nuevo' empresa.id %}" class="btn btn-primary">+ Nuevo Código</a>
</div>

<table class="admin-table">
    <thead>
        <tr>
            <th>Código</th>
            <th>Estado</th>
        </tr>
    </thead>
    <tbody>
    {% for c in codigos %}
        <tr>
            <td>{{ c.codigo }}</td>
            <td>
                {% if c.usado %}
                    <span class="badge badge-gray">Usado</span>
                {% else %}
                    <span class="badge badge-green">Disponible</span>
                {% endif %}
            </td>
        </tr>
    {% empty %}
        <tr>
            <td colspan="2" style="text-align:center;">Aún no hay códigos.</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<a href="{% url 'adminpanel:convenios_list' %}" class="back-link">← Volver</a>
{% endblock %}
